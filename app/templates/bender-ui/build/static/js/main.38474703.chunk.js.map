{"version":3,"sources":["conf.js","components/Pending.js","components/Welcome.js","components/DrinkCard.js","components/Selection.js","components/Enjoy.js","stock_drink_1.jpeg","index.js"],"names":["DOMAIN","Pending","message","className","color","size","speed","animating","Welcome","history","useHistory","useState","pending","setPending","style","textAlign","paddingBottom","fontSize","fontFamily","onClick","fetch","method","then","response","json","push","catch","err","console","log","DrinkCard","drink","isAvailable","instructions","filter","instruction","ingredient","resevoir","length","allowClick","name","totalPour","reduce","sum","i","pour_duration","lowest_percentage","part","map","idx","pourPortion","Math","round","result","comma","id","getPartsList","repeat","acc","cost","Selection","drinks","setDrinks","resourceUrl","useEffect","data","body","JSON","stringify","drink_id","headers","Accept","selectDrink","defaultProps","Enjoy","to","ReactDOM","render","StrictMode","alt","src","drink_1","path","exact","document","getElementById"],"mappings":"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","file":"static/js/main.38474703.chunk.js","sourcesContent":["let env;\r\n\r\nif (process.env.NODE_ENV !== \"production\") {  \r\n    env = true;\r\n} else {\r\n    env = false;\r\n}\r\n\r\nexport const DOMAIN = env ? \"http://10.0.0.4:8000\" : \"http://localhost:8000\";","import React from 'react'\r\nimport { Windmill } from 'react-activity';\r\n\r\nexport default function Pending({message}) {\r\n    return (\r\n        <div className=\"pending__container is-centered\">\r\n            <div className=\"pending_spinner is-centered\">\r\n                <Windmill color=\"#727981\" size={34} speed={1} animating={true} />\r\n            </div>\r\n            <p className=\"pending__subtext\">{message}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nPending.defaultProps = {\r\n    message: \"Pending...\"\r\n}","import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { DOMAIN } from '../conf';\r\nimport Pending from './Pending';\r\n\r\nexport default function Welcome() {\r\n\r\n    const history = useHistory()\r\n    const [pending, setPending] = useState(false)\r\n\r\n    const wake = () => {\r\n        setPending(true)\r\n        fetch(DOMAIN + \"/wake/\", {\r\n            method: \"POST\",\r\n        }).then((response) => {\r\n            return response.json();\r\n        })\r\n        .then((response) => {\r\n            setPending(false)\r\n            history.push(\"drinks\")\r\n        }).catch((err) => {\r\n            console.log(\"issue waking machine\", err, err.response)\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"columns\">\r\n                <div className=\"column\">\r\n                    <div className=\"box\">\r\n                        <h2 style={{\r\n                            textAlign: \"center\",\r\n                            paddingBottom: \"1rem\",\r\n                            fontSize: \"7rem\",\r\n                            fontFamily: \"Pinyon Script\"\r\n                        }}>Bender</h2>\r\n                        {pending ? <Pending message=\"Loading...\"/> : (\r\n                            <div className=\"buttons is-centered\">\r\n                                <button className=\"button is-primary is-size-3\" onClick={wake}>Start</button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"column\"></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function DrinkCard({ onClick, drink }) {\r\n\r\n    let missingIngredients = drink.instructions.filter(((instruction) => {\r\n        return instruction.ingredient.resevoir == null\r\n    }))\r\n    let isAvailable = missingIngredients.length == 0;\r\n    const allowClick = isAvailable ? onClick : () => { }\r\n\r\n    const getAverageCost = () => {\r\n        //naive rn\r\n        return Math.round(drink.instructions.reduce((acc, instruction) => {\r\n            return acc + instruction.ingredient.cost.length\r\n        }, 0) / drink.instructions.length)\r\n    }\r\n\r\n    const getPartsList = () => {\r\n        // 3 parts x, 1 part y\r\n\r\n        let totalPour = drink.instructions.reduce((sum, i) => sum + i.pour_duration, 0)\r\n        let lowest_percentage = 100;\r\n        for (let i = 0; i < drink.instructions.length; i++) {\r\n            const part = drink.instructions[i].pour_duration / totalPour;\r\n            if (part < lowest_percentage) {\r\n                lowest_percentage = part\r\n            }\r\n        }\r\n\r\n        return drink.instructions.map((instruction, idx) => {\r\n            // i crack myself up\r\n            let pourPortion = instruction.pour_duration / totalPour\r\n            let part = Math.round(pourPortion / lowest_percentage)\r\n            let result = `${part} part${part > 1 ? 's' : ''} ${instruction.ingredient.name}`\r\n            let comma = drink.instructions.length - 1 === idx ? \"\" : \", \"\r\n            return <p key={`instruction-${instruction.id}`} className=\"drink-option__description\">{result + comma}</p>\r\n        })\r\n\r\n    }\r\n\r\n    const getUnavailableOverlay = () => {\r\n        return (\r\n            <div className=\"drink-unavailable\">\r\n                <p className=\"drink-unavailable__text\">Unavailable</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"column is-half\">\r\n            <div className={\"box drink-option\"} onClick={allowClick}>\r\n                {isAvailable ? null : getUnavailableOverlay()}\r\n                <div className=\"drink-option__name\">{drink.name}</div>\r\n                <div className=\"columns\">\r\n                    <div className=\"column\">\r\n                        {getPartsList()}\r\n                    </div>\r\n                    <div className=\"column drink-price\">\r\n                        <p className=\"drink-option__description\" >{\"$\".repeat(getAverageCost())}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport DrinkCard from './DrinkCard';\r\nimport { DOMAIN } from '../conf';\r\nimport Pending from './Pending'\r\n\r\nexport default function Selection() {\r\n\r\n    let [drinks, setDrinks] = useState([])\r\n    let [pending, setPending] = useState(false)\r\n    const history = useHistory();\r\n    let resourceUrl = DOMAIN + \"/drinks/\"\r\n\r\n    useEffect(() => {\r\n        setPending(true)\r\n        fetch(resourceUrl).then((response) => {\r\n            return response.json()\r\n        }).then((data) => {\r\n            setPending(false);\r\n            console.log(\"data from drinks api\", data);\r\n            setDrinks(data)\r\n        }).catch((err) => {\r\n            console.log(\"could not get drink selection! Aborting\", err, err.response)\r\n            setPending(false)\r\n            history.push(\"/\")\r\n        })\r\n    }, [history, resourceUrl])\r\n\r\n    const selectDrink = (drink) => {\r\n        let body = JSON.stringify({ drink_id: drink.id });\r\n        console.log(\"selected \", drink.id, \"Passing\", body)\r\n        fetch(resourceUrl, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                'Content-Type': \"application/json\",\r\n            },\r\n            body: body,\r\n        }).then(function (response) {\r\n            return response.json();\r\n        }).then(function (data) {\r\n            history.push(\"/enjoy\");\r\n        }).catch((err) => {\r\n            console.log('error starting drink', err, err.response);\r\n        });\r\n    }\r\n\r\n    const getPending = () => {\r\n        return <Pending />\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"box\">\r\n                <h1 className=\"pageHeading\">Select</h1>\r\n                {pending ? getPending() : null}\r\n                <div className=\"columns is-multiline\">\r\n                    {drinks.map((drink) => {\r\n                        return (\r\n                            <DrinkCard\r\n                                key={drink.id}\r\n                                drink={drink}\r\n                                onClick={() => selectDrink(drink)}\r\n                            />\r\n                        )\r\n                    }\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Enjoy() {\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"box\">\r\n                <h1 className=\"pageHeading\">Enjoy!</h1>\r\n                <Link to=\"/\">\r\n                    <div className=\"buttons is-centered\">\r\n                        <button className=\"button is-primary is-size-4\">Start Over</button>\r\n                    </div>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/stock_drink_1.b2cc5eda.jpeg\";","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './App.css';\r\nimport Welcome from './components/Welcome';\r\nimport Selection from './components/Selection';\r\nimport Enjoy from './components/Enjoy';\r\nimport 'bulma/css/bulma.css';\r\nimport 'react-activity/dist/react-activity.css';\r\nimport drink_1 from './stock_drink_1.jpeg'\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch, Route\r\n} from \"react-router-dom\";\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <div className=\"hero is-fullheight has-background-dark has-background\">\r\n      <img alt=\"Fill Murray\" className=\"hero-background is-transparent\" src={drink_1} />\r\n      <div className=\"hero-body\">\r\n\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/enjoy\" exact>\r\n              <Enjoy />\r\n            </Route>\r\n            <Route path=\"/drinks\" exact>\r\n              <Selection />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <Welcome />\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n\r\n      </div>\r\n    </div>\r\n\r\n\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}