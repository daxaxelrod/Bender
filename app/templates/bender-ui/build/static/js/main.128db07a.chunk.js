(this["webpackJsonpbender-ui"]=this["webpackJsonpbender-ui"]||[]).push([[0],{24:function(e,n,c){},32:function(e,n,c){"use strict";c.r(n);var t=c(0),s=c(1),i=c.n(s),a=c(16),r=c.n(a),o=(c(24),c(8)),l=c(2);var d="http://localhost:8000",j=c(17);function u(e){var n=e.message;return Object(t.jsxs)("div",{className:"pending__container is-centered",children:[Object(t.jsx)("div",{className:"pending_spinner is-centered",children:Object(t.jsx)(j.Windmill,{color:"#727981",size:34,speed:1,animating:!0})}),Object(t.jsx)("p",{className:"pending__subtext",children:n})]})}function b(){var e=Object(l.f)(),n=Object(s.useState)(!1),c=Object(o.a)(n,2),i=c[0],a=c[1];return Object(t.jsx)("div",{className:"container",children:Object(t.jsxs)("div",{className:"columns",children:[Object(t.jsx)("div",{className:"column",children:Object(t.jsxs)("div",{className:"box",children:[Object(t.jsx)("h2",{style:{textAlign:"center",paddingBottom:"1rem",fontSize:"7rem",fontFamily:"Pinyon Script"},children:"Bender"}),i?Object(t.jsx)(u,{message:"Loading..."}):Object(t.jsx)("div",{className:"buttons is-centered",children:Object(t.jsx)("button",{className:"button is-primary is-size-3",onClick:function(){a(!0),fetch(d+"/wake/",{method:"POST"}).then((function(e){return e.json()})).then((function(n){a(!1),e.push("drinks")})).catch((function(e){console.log("issue waking machine",e,e.response)}))},children:"Start"})})]})}),Object(t.jsx)("div",{className:"column"})]})})}function h(e){var n=e.onClick,c=e.drink,s=0==c.instructions.filter((function(e){return null==e.ingredient.resevoir})).length,i=s?n:function(){};return Object(t.jsx)("div",{className:"column is-half",children:Object(t.jsxs)("div",{className:"box drink-option",onClick:i,children:[s?null:Object(t.jsx)("div",{className:"drink-unavailable",children:Object(t.jsx)("p",{className:"drink-unavailable__text",children:"Unavailable"})}),Object(t.jsx)("div",{className:"drink-option__name",children:c.name}),Object(t.jsx)("div",{className:"columns",children:Object(t.jsx)("div",{className:"column",children:function(){for(var e=c.instructions.reduce((function(e,n){return e+n.pour_duration}),0),n=100,s=0;s<c.instructions.length;s++){var i=c.instructions[s].pour_duration/e;i<n&&(n=i)}return c.instructions.map((function(s,i){var a=s.pour_duration/e,r=Math.round(a/n),o="".concat(r," part").concat(r>1?"s":""," ").concat(s.ingredient.name),l=c.instructions.length-1===i?"":", ";return Object(t.jsx)("p",{className:"drink-option__description",children:o+l},"instruction-".concat(s.id))}))}()})})]})})}u.defaultProps={message:"Pending..."};function m(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),c=n[0],i=n[1],a=Object(s.useState)(!1),r=Object(o.a)(a,2),j=r[0],b=r[1],m=Object(s.useState)(!1),O=Object(o.a)(m,2),x=O[0],p=O[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),g=v[0],N=v[1],k=Object(l.f)(),y=d+"/drinks/";Object(s.useEffect)((function(){b(!0),fetch(y).then((function(e){return e.json()})).then((function(e){b(!1),console.log("data from drinks api",e),i(e)})).catch((function(e){console.log("could not get drink selection! Aborting",e,e.response),b(!1),k.push("/")}))}),[k,y]),Object(s.useEffect)((function(){var e=window.setTimeout((function(){k.push("/")}),16e4);return function(){return window.clearTimeout(e)}}),[]);return Object(t.jsx)("div",{className:"container",children:Object(t.jsx)("div",{className:"box",style:{margin:0},children:j?function(){var e="Loading Selection";return console.log("displaying pending"),x&&(e="Preparing your drink..."),Object(t.jsx)(u,{message:e})}():Object(t.jsxs)("div",{children:[Object(t.jsx)("div",{className:"columns is-multiline",children:c.slice(2*(g-1),2*g).map((function(e){return Object(t.jsx)(h,{drink:e,onClick:function(){return function(e){var n=JSON.stringify({drink_id:e.id});console.log("selected ",e.id,"Passing",n),b(!0),p(!0),fetch(y,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:n}).then((function(e){return b(!1),e.json()})).then((function(e){b(!1),k.push("/enjoy")})).catch((function(e){b(!1),console.log("error starting drink",e,e.response)}))}(e)}},e.id)}))}),Object(t.jsxs)("div",{className:"columns",children:[Object(t.jsx)("div",{className:"column is-5"}),Object(t.jsx)("div",{className:"column",children:Object(t.jsxs)("div",{className:"columns is-justify-content-space-between",children:[Object(t.jsx)("div",{className:"button is-dark p-4",onClick:function(){g-1>0&&N(g-1)},children:"\ud83e\udc18"}),Object(t.jsx)("div",{className:"button is-dark p-4",onClick:function(){var e=Math.ceil(c.length/2);g+1<=e&&N(g+1)},children:"\ud83e\udc1a"})]})}),Object(t.jsx)("div",{className:"column is-5"})]})]})})})}var O=c(9);function x(){return Object(t.jsx)("div",{className:"container",children:Object(t.jsxs)("div",{className:"box",children:[Object(t.jsx)("h1",{className:"pageHeading mb-4",children:"Enjoy!"}),Object(t.jsx)(O.b,{to:"/",children:Object(t.jsx)("div",{className:"buttons is-centered",children:Object(t.jsx)("button",{className:"button is-primary is-size-4",children:"Start Over"})})})]})})}c(30),c(31);var p=c.p+"static/media/stock_drink_1.b2cc5eda.jpeg";r.a.render(Object(t.jsx)(i.a.StrictMode,{children:Object(t.jsxs)("div",{className:"hero is-fullheight has-background-dark has-background",children:[Object(t.jsx)("img",{alt:"Fill Murray",className:"hero-background is-transparent",src:p}),Object(t.jsx)("div",{className:"hero-body",children:Object(t.jsx)(O.a,{children:Object(t.jsxs)(l.c,{children:[Object(t.jsx)(l.a,{path:"/enjoy",exact:!0,children:Object(t.jsx)(x,{})}),Object(t.jsx)(l.a,{path:"/drinks",exact:!0,children:Object(t.jsx)(m,{})}),Object(t.jsx)(l.a,{path:"/",children:Object(t.jsx)(b,{})})]})})})]})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.128db07a.chunk.js.map