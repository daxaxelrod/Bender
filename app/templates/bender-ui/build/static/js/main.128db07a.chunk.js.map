{"version":3,"sources":["conf.js","components/Pending.js","components/Welcome.js","components/DrinkCard.js","components/Selection.js","components/Enjoy.js","stock_drink_1.jpeg","index.js"],"names":["DOMAIN","Pending","message","className","color","size","speed","animating","Welcome","history","useHistory","useState","pending","setPending","style","textAlign","paddingBottom","fontSize","fontFamily","onClick","fetch","method","then","response","json","push","catch","err","console","log","DrinkCard","drink","isAvailable","instructions","filter","instruction","ingredient","resevoir","length","allowClick","name","totalPour","reduce","sum","i","pour_duration","lowest_percentage","part","map","idx","pourPortion","Math","round","result","comma","id","getPartsList","defaultProps","Selection","drinks","setDrinks","selectedDrink","setSelectedDrink","pageNum","setPageNum","resourceUrl","useEffect","data","timeoutID","window","setTimeout","clearTimeout","margin","getPending","slice","body","JSON","stringify","drink_id","headers","Accept","selectDrink","max","ceil","Enjoy","to","ReactDOM","render","StrictMode","alt","src","drink_1","path","exact","document","getElementById"],"mappings":"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","file":"static/js/main.128db07a.chunk.js","sourcesContent":["let env;\n\nif (process.env.NODE_ENV !== \"production\") {  \n    env = true;\n} else {\n    env = false;\n}\n\nexport const DOMAIN = env ? \"http://localhost:8000\" : \"http://localhost:8000\";","import React from 'react'\nimport { Windmill } from 'react-activity';\n\nexport default function Pending({message}) {\n    return (\n        <div className=\"pending__container is-centered\">\n            <div className=\"pending_spinner is-centered\">\n                <Windmill color=\"#727981\" size={34} speed={1} animating={true} />\n            </div>\n            <p className=\"pending__subtext\">{message}</p>\n        </div>\n    )\n}\n\nPending.defaultProps = {\n    message: \"Pending...\"\n}","import React, { useState } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport { DOMAIN } from '../conf';\nimport Pending from './Pending';\n\nexport default function Welcome() {\n\n    const history = useHistory()\n    const [pending, setPending] = useState(false)\n\n    const wake = () => {\n        setPending(true)\n        fetch(DOMAIN + \"/wake/\", {\n            method: \"POST\",\n        }).then((response) => {\n            return response.json();\n        })\n        .then((response) => {\n            setPending(false)\n            history.push(\"drinks\")\n        }).catch((err) => {\n            console.log(\"issue waking machine\", err, err.response)\n        })\n    }\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"columns\">\n                <div className=\"column\">\n                    <div className=\"box\">\n                        <h2 style={{\n                            textAlign: \"center\",\n                            paddingBottom: \"1rem\",\n                            fontSize: \"7rem\",\n                            fontFamily: \"Pinyon Script\"\n                        }}>Bender</h2>\n                        {pending ? <Pending message=\"Loading...\"/> : (\n                            <div className=\"buttons is-centered\">\n                                <button className=\"button is-primary is-size-3\" onClick={wake}>Start</button>\n                            </div>\n                        )}\n                    </div>\n                </div>\n                <div className=\"column\"></div>\n            </div>\n        </div>\n    )\n}\n","import React from 'react'\n\nexport default function DrinkCard({ onClick, drink }) {\n\n    let missingIngredients = drink.instructions.filter(((instruction) => {\n        return instruction.ingredient.resevoir == null\n    }))\n    let isAvailable = missingIngredients.length == 0;\n    const allowClick = isAvailable ? onClick : () => { }\n\n    const getAverageCost = () => {\n        //naive rn\n        return Math.round(drink.instructions.reduce((acc, instruction) => {\n            return acc + instruction.ingredient.cost.length\n        }, 0) / drink.instructions.length)\n    }\n\n    const getPartsList = () => {\n        // 3 parts x, 1 part y\n\n        let totalPour = drink.instructions.reduce((sum, i) => sum + i.pour_duration, 0)\n        let lowest_percentage = 100;\n        for (let i = 0; i < drink.instructions.length; i++) {\n            const part = drink.instructions[i].pour_duration / totalPour;\n            if (part < lowest_percentage) {\n                lowest_percentage = part\n            }\n        }\n        \n        return drink.instructions.map((instruction, idx) => {\n            // i crack myself up\n            let pourPortion = instruction.pour_duration / totalPour\n            let part = Math.round(pourPortion / lowest_percentage)\n            let result = `${part} part${part > 1 ? 's' : ''} ${instruction.ingredient.name}`\n            let comma = drink.instructions.length - 1 === idx ? \"\" : \", \"\n            return <p key={`instruction-${instruction.id}`} className=\"drink-option__description\">{result + comma}</p>\n        })\n\n    }\n\n    const getUnavailableOverlay = () => {\n        return (\n            <div className=\"drink-unavailable\">\n                <p className=\"drink-unavailable__text\">Unavailable</p>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"column is-half\">\n            <div className={\"box drink-option\"} onClick={allowClick}>\n                {isAvailable ? null : getUnavailableOverlay()}\n                <div className=\"drink-option__name\">{drink.name}</div>\n                <div className=\"columns\">\n                    <div className=\"column\">\n                        {getPartsList()}\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import React, { useEffect, useState } from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport DrinkCard from './DrinkCard';\nimport { DOMAIN } from '../conf';\nimport Pending from './Pending';\n\nconst NUMBER_PER_PAGE = 2;\n\nexport default function Selection() {\n\n    let [drinks, setDrinks] = useState([])\n    let [pending, setPending] = useState(false)\n    let [selectedDrink, setSelectedDrink] = useState(false)\n    let [pageNum, setPageNum] = useState(1);\n\n    const history = useHistory();\n    let resourceUrl = DOMAIN + \"/drinks/\"\n\n    useEffect(() => {\n        setPending(true)\n        fetch(resourceUrl).then((response) => {\n            return response.json()\n        }).then((data) => {\n            setPending(false);\n            console.log(\"data from drinks api\", data);\n            setDrinks(data)\n        }).catch((err) => {\n            console.log(\"could not get drink selection! Aborting\", err, err.response)\n            setPending(false)\n            history.push(\"/\")\n        })\n    }, [history, resourceUrl])\n\n\n    useEffect(() => {\n        const timeoutID = window.setTimeout(() => {\n            history.push(\"/\")\n        }, 160000); // customize with value from server in the future\n    \n        return () => window.clearTimeout(timeoutID );\n    }, []);\n\n    const selectDrink = (drink) => {\n        let body = JSON.stringify({ drink_id: drink.id });\n        console.log(\"selected \", drink.id, \"Passing\", body)\n        setPending(true)\n        setSelectedDrink(true)\n        fetch(resourceUrl, {\n            method: \"POST\",\n            headers: {\n                Accept: \"application/json\",\n                'Content-Type': \"application/json\",\n            },\n            body: body,\n        }).then(function (response) {\n            setPending(false);\n            return response.json();\n        }).then(function (data) {\n            setPending(false);\n            history.push(\"/enjoy\");\n        }).catch((err) => {\n           setPending(false);\n            console.log('error starting drink', err, err.response);\n        });\n    }\n\n    const getPending = () => {\n        let message = \"Loading Selection\";\n        console.log(\"displaying pending\")\n        if (selectedDrink) {\n            message = \"Preparing your drink...\"\n        }\n        return <Pending message={message}/>\n    }\n    \n    const paginate = () => {\n        return drinks.slice((pageNum - 1) * NUMBER_PER_PAGE, NUMBER_PER_PAGE * pageNum);\n    }\n    \n    const goBack = () => {\n        let min = 0;\n        if (pageNum - 1 > min) {\n             setPageNum(pageNum - 1)\n        }\n    }\n    \n    const goForward = () => {\n        let max = Math.ceil(drinks.length / NUMBER_PER_PAGE)\n        if (pageNum + 1 <= max) {\n             setPageNum(pageNum + 1)\n        }\n    }\n\n    return (\n        <div className=\"container\">\n            <div className=\"box\" style={{\n                margin: 0\n            }}>\n                {pending ? getPending() : (\n                    <div>\n                <div className=\"columns is-multiline\">\n                    {paginate(drinks).map((drink) => {\n                        return (\n                            <DrinkCard\n                                key={drink.id}\n                                drink={drink}\n                                onClick={() => selectDrink(drink)}\n                            />\n                        )\n                    }\n                    )}\n\n                </div>\n                    <div className=\"columns\">\n                        <div className=\"column is-5\"></div>\n                        <div className=\"column\">\n                            <div className=\"columns is-justify-content-space-between\">\n                                <div className=\"button is-dark p-4\" onClick={goBack}>&#129048;</div>\n                                <div className=\"button is-dark p-4\" onClick={goForward}>&#129050;</div>    \n                            </div>                        \n                        </div>\n                        <div className=\"column is-5\"></div>\n                    </div>\n                </div>\n                )}\n            </div>\n        </div>\n    )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function Enjoy() {\n    return (\n        <div className=\"container\">\n            <div className=\"box\">\n                <h1 className=\"pageHeading mb-4\">Enjoy!</h1>\n                <Link to=\"/\">\n                    <div className=\"buttons is-centered\">\n                        <button className=\"button is-primary is-size-4\">Start Over</button>\n                    </div>\n                </Link>\n            </div>\n        </div>\n        \n    )\n}\n","export default __webpack_public_path__ + \"static/media/stock_drink_1.b2cc5eda.jpeg\";","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './App.css';\nimport Welcome from './components/Welcome';\nimport Selection from './components/Selection';\nimport Enjoy from './components/Enjoy';\nimport 'bulma/css/bulma.css';\nimport 'react-activity/dist/react-activity.css';\nimport drink_1 from './stock_drink_1.jpeg'\n\nimport {\n  BrowserRouter as Router,\n  Switch, Route\n} from \"react-router-dom\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <div className=\"hero is-fullheight has-background-dark has-background\">\n      <img alt=\"Fill Murray\" className=\"hero-background is-transparent\" src={drink_1} />\n      <div className=\"hero-body\">\n\n        <Router>\n          <Switch>\n            <Route path=\"/enjoy\" exact>\n              <Enjoy />\n            </Route>\n            <Route path=\"/drinks\" exact>\n              <Selection />\n            </Route>\n            <Route path=\"/\">\n              <Welcome />\n            </Route>\n          </Switch>\n        </Router>\n\n      </div>\n    </div>\n\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}